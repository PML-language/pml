PML₂ - Implementation of the PML₂ language
==========================================

PML₂ is an ML-like programming language (similar to OCaml or SML) which type
system enable the specification and proof of program properties (expressed
in terms of program equivalence).

Dependencies and compilation
----------------------------

PML₂ requires a Unix-like system. It should work on Linux as well as on MacOS.
It might also be possible to make it work on Windows with Cygwyn or with "bash
on Windows").

List of dependencies:
 - GNU make,
 - OCaml (at least 4.04.0),
 - ocamlbuild,
 - findlib,
 - bindlib 4.0.5 (from opam or https://github.com/rlepigre/ocaml-bindlib),
 - earley (from opam or https://github.com/rlepigre/ocaml-earley),
 - earley-ocaml (from opam or https://github.com/rlepigre/ocaml-earley-ocaml).

Using Opam, a suitable OCaml environment can be setup as follows.
```bash
opam switch 4.05.0
eval `opam config env`
opam install ocamlfind ocamlbuild bindlib.4.0.5 earley earley-ocaml
```

To compile PML₂, just run the command `make` in the source directory.
This produces the `main.native` binary, which can be run on files with
the `.pml` extension (use `./main.native --help` for more informations).

```bash
make
make install       # optionally install the program.
make install_vim   # optionally install vim support.
make install_emacs # optionally install emacs support.
```

You can edit `Makefile.config` to see or modify the default installation
directories.

Documentation
-------------

The documentation (very incomplete) can be produced as follows.

```bash
make doc
```

This generates the documentation of the ML modules for developers

My advice to start looking at the code would be to take a look at the three
different abstract syntax representations.
 - The main abstract syntax is implemented as a GADT in `kernel/ast.ml`,
 - The abstract syntax after parsing can be found in `parser/raw.ml`, together
   with the first level of type checking (sorting),
 - The graph representation of terms for the decision of equivalence can be
   found in `ast/equiv.ml`.

The implementation of type checking can be found in `kernel/typing.ml`, and
the function for comparing expressions (including the unification functions)
are in `kernel/compare.ml`.

Organization of the repository
------------------------------

This folder contains files related to the PML2 project.

The source files can be found in the following folders:
 - `util` contains a set of libraries not directly related to PML2,
 - `parser` contains a low level AST of the language and the parser,
 - `kernel` contains the core of PML2 (type checking, equivalence, AST...),
 - `pml2` contains the main program.

Other directories:
 - `doc` contains the documentation of some modules (generated by ocamldoc),
 - `editors` contains PML2 modes for editors (vim and emacs only),
 - `lib` contains the PML2 standard library (very small),
 - `test` contains most of our examples of PML2 programs,
 - `phd_examples` contains the examples that are included in my thesis,

The directories `tmp` and `attic` are not relevant as the contain files used
for debugging the newest features including termination checking and old code
that we want to keep somewhere.
